(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{2229:(e,s,t)=>{"use strict";t.d(s,{default:()=>V});var a=t(5155),l=t(2115),n=t(6489),r=t(33),i=t(1169),c=t(3409),d=t(647),o=t(9715),x=t(1740),m=t(1871),u=t(5870),g=t(1524),h=t(7013),b=t(1761),p=t(5882),j=t(7816),N=t(6983),y=t(1078),f=t(2516),v=t(6583),w=t(1786),A=t(3664),C=t(9141),D=t(7586),R=t(7828),I=t(1010),M=t(1360),S=t(6191),P=t(4722),k=t(5718),E=t(5998),T=t(4926);let O={ADMIN:{canViewAllProperties:!0,canManageUsers:!0,canViewFinancials:!0,canManageMaintenance:!0,canSendNotifications:!0,canUploadDocuments:!0,canViewReports:!0,canManageLeases:!0},LANDLORD:{canViewAllProperties:!1,canManageUsers:!1,canViewFinancials:!0,canManageMaintenance:!1,canSendNotifications:!1,canUploadDocuments:!0,canViewReports:!0,canManageLeases:!0},OPERATIONS_MANAGER:{canViewAllProperties:!0,canManageUsers:!1,canViewFinancials:!1,canManageMaintenance:!0,canSendNotifications:!0,canUploadDocuments:!0,canViewReports:!0,canManageLeases:!1},ACCOUNTANT:{canViewAllProperties:!1,canManageUsers:!1,canViewFinancials:!0,canManageMaintenance:!1,canSendNotifications:!0,canUploadDocuments:!0,canViewReports:!0,canManageLeases:!1},SECRETARY:{canViewAllProperties:!1,canManageUsers:!1,canViewFinancials:!1,canManageMaintenance:!1,canSendNotifications:!0,canUploadDocuments:!0,canViewReports:!1,canManageLeases:!1}},V=()=>{var e,s,t;let{data:V}=(0,n.useSession)(),[U,F]=(0,l.useState)("overview"),[L,G]=(0,l.useState)({totalRevenue:0,totalExpenses:0,netIncome:0,outstandingInvoices:0,unpaidBills:0,bankBalance:0,cashFlow:0,totalCustomers:0,activeProjects:0,pendingPayments:0,overduePayments:0,totalDocuments:0,monthlyGrowth:0}),[B,_]=(0,l.useState)([]),[q,z]=(0,l.useState)([]),[K,Y]=(0,l.useState)(!0),[J,W]=(0,l.useState)(!1),[H,Q]=(0,l.useState)(!1),[X,Z]=(0,l.useState)(!1),[$,ee]=(0,l.useState)({name:"",email:"",phone:"",type:"tenant"}),[es,et]=(0,l.useState)({tenantId:"",propertyId:"",amount:"",description:"",dueDate:""}),[ea,el]=(0,l.useState)({leaseId:"",amount:"",status:"PENDING",dueDate:"",invoiceId:""}),en=null==V||null==(e=V.user)?void 0:e.role,er=[{id:"overview",label:"Business Overview",icon:r.A,roles:["ADMIN","LANDLORD","OPERATIONS_MANAGER","ACCOUNTANT","SECRETARY"]},{id:"customers",label:"Customer Management",icon:i.A,roles:["ADMIN","ACCOUNTANT","SECRETARY"]},{id:"invoicing",label:"Invoicing & Payments",icon:c.A,roles:["ADMIN","ACCOUNTANT"]},{id:"accounting",label:"Accounting",icon:d.A,roles:["ADMIN","ACCOUNTANT"]},{id:"documents",label:"Documents & Receipts",icon:o.A,roles:["ADMIN","SECRETARY","ACCOUNTANT"]},{id:"reports",label:"Business Reports",icon:x.A,roles:["ADMIN","ACCOUNTANT","OPERATIONS_MANAGER"]},{id:"projects",label:"Property Projects",icon:m.A,roles:["ADMIN","OPERATIONS_MANAGER"]},{id:"settings",label:"Business Settings",icon:u.A,roles:["ADMIN"]}].filter(e=>en&&e.roles.includes(en)),ei=async()=>{try{let e=await fetch("/api/admin/business/stats");if(e.ok){let s=await e.json();G(e=>({...e,...s}))}if(en&&O[en].canManageUsers){let e=await fetch("/api/admin/business/customers");if(e.ok){let s=await e.json();_(s)}}if(en&&O[en].canViewFinancials){let e=await fetch("/api/admin/business/invoices?limit=10");if(e.ok){let s=await e.json();z(s)}}}catch(e){console.error("Error fetching business data:",e)}finally{Y(!1)}};(0,l.useEffect)(()=>{ei()},[en]);let ec=async e=>{e.preventDefault();try{let e=await fetch("/api/admin/business/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(e.ok){let s=await e.json();_(e=>[...e,s]),W(!1),ee({name:"",email:"",phone:"",type:"tenant"}),alert("Customer created successfully!")}else{let s=await e.json();alert(s.error||"Failed to create customer")}}catch(e){console.error("Error creating customer:",e),alert("Failed to create customer")}},ed=async e=>{e.preventDefault();try{let e=await fetch("/api/admin/business/invoices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...es,amount:parseFloat(es.amount)})});if(e.ok){let s=await e.json();z(e=>[s,...e]),Q(!1),et({tenantId:"",propertyId:"",amount:"",description:"",dueDate:""}),alert("Invoice created successfully!")}else{let s=await e.json();alert(s.error||"Failed to create invoice")}}catch(e){console.error("Error creating invoice:",e),alert("Failed to create invoice")}},eo=async e=>{e.preventDefault();try{let e=await fetch("/api/admin/business/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ea,amount:parseFloat(ea.amount)})});if(e.ok)Z(!1),el({leaseId:"",amount:"",status:"PENDING",dueDate:"",invoiceId:""}),alert("Payment recorded successfully!"),ei();else{let s=await e.json();alert(s.error||"Failed to record payment")}}catch(e){console.error("Error recording payment:",e),alert("Failed to record payment")}},ex=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return K?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading business management dashboard..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Business Management"}),(0,a.jsxs)("p",{className:"text-gray-600 text-lg",children:["Comprehensive business operations for ",(null==V||null==(s=V.user)?void 0:s.name)||"Murivest Realty"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(E.A,{className:"h-6 w-6 text-gray-600"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",null==V||null==(t=V.user)?void 0:t.name," (",en,")"]}),(0,a.jsxs)("button",{onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"flex items-center bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-8",children:(0,a.jsx)("nav",{className:"space-y-2",children:er.map(e=>(0,a.jsxs)("button",{onClick:()=>F(e.id),className:"w-full flex items-center px-4 py-3 rounded-xl font-medium transition-all ".concat(U===e.id?"bg-blue-600 text-white shadow-lg":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),(0,a.jsx)("span",{children:e.label})]},e.id))})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(()=>{switch(U){case"overview":default:return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)(g.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,a.jsx)(h.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["+",L.monthlyGrowth,"%"]})]})]}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:ex(L.totalRevenue)}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Revenue"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)(b.A,{className:"h-6 w-6 text-blue-600"})})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:ex(L.netIncome)}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Net Income"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)(i.A,{className:"h-6 w-6 text-purple-600"})})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:L.totalCustomers}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Total Customers"})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-orange-100 p-3 rounded-lg",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-orange-600"})})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:ex(L.bankBalance)}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Bank Balance"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Payment Status"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-800",children:"Paid Invoices"}),(0,a.jsx)("p",{className:"text-green-600 text-sm",children:"On time payments"})]})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-600",children:ex(L.totalRevenue-L.outstandingInvoices)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"h-8 w-8 text-yellow-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-yellow-800",children:"Pending Payments"}),(0,a.jsx)("p",{className:"text-yellow-600 text-sm",children:"Awaiting payment"})]})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-yellow-600",children:ex(L.pendingPayments)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.A,{className:"h-8 w-8 text-red-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-red-800",children:"Overdue Payments"}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:"Require attention"})]})]}),(0,a.jsx)("span",{className:"text-2xl font-bold text-red-600",children:ex(L.overduePayments)})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Recent Invoices"}),(0,a.jsx)("div",{className:"space-y-4",children:q.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg mr-4 ".concat("paid"===e.status?"bg-green-100":"overdue"===e.status?"bg-red-100":"bg-yellow-100"),children:(0,a.jsx)(f.A,{className:"h-5 w-5 ".concat("paid"===e.status?"text-green-600":"overdue"===e.status?"text-red-600":"text-yellow-600")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.number}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.customerName})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:ex(e.amount)}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===e.status?"bg-green-100 text-green-800":"overdue"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Top Customers"}),(0,a.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:"View All Customers"})]}),(0,a.jsx)("div",{className:"space-y-4",children:B.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg mr-4 bg-blue-100",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.email})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:ex(e.balance)}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"overdue"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]})]},e.id))})]})]});case"customers":return en&&O[en].canManageUsers?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Customer Management"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>W(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 inline mr-2"}),"Add Customer"]}),(0,a.jsxs)("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 inline mr-2"}),"Import"]})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:B.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg mr-4 bg-blue-100",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-1"})," ",e.email]}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm flex items-center",children:[(0,a.jsx)(C.A,{className:"h-4 w-4 mr-1"})," ",e.phone]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:ex(e.balance)}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("tenant"===e.type?"bg-blue-100 text-blue-800":"landlord"===e.type?"bg-green-100 text-green-800":"contractor"===e.type?"bg-orange-100 text-orange-800":"bg-purple-100 text-purple-800"),children:e.type})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 inline mr-1"}),"Email"]}),(0,a.jsxs)("button",{className:"bg-green-100 text-green-800 px-3 py-1 rounded text-sm font-semibold",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 inline mr-1"}),"SMS"]}),(0,a.jsxs)("button",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded text-sm font-semibold",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 inline mr-1"}),"View Details"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{className:"bg-gray-100 text-gray-800 px-3 py-1 rounded text-sm font-semibold",children:[(0,a.jsx)(I.A,{className:"h-4 w-4 inline mr-1"}),"Edit"]}),(0,a.jsxs)("button",{className:"bg-red-100 text-red-800 px-3 py-1 rounded text-sm font-semibold",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 inline mr-1"}),"Delete"]})]})]})]},e.id))})]})}):(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"});case"invoicing":return en&&O[en].canViewFinancials?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)(S.A,{className:"h-6 w-6 text-blue-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Create Invoice"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Generate new customer invoices"}),(0,a.jsx)("button",{onClick:()=>Q(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"New Invoice"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-green-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Record Payment"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Record customer payments"}),(0,a.jsx)("button",{onClick:()=>Z(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Record Payment"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)(P.A,{className:"h-6 w-6 text-purple-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Invoice Templates"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Manage invoice templates"}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Manage Templates"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Recent Invoices"}),(0,a.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-xl",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg mr-4 ".concat("paid"===e.status?"bg-green-100":"overdue"===e.status?"bg-red-100":"bg-yellow-100"),children:(0,a.jsx)(f.A,{className:"h-5 w-5 ".concat("paid"===e.status?"text-green-600":"overdue"===e.status?"text-red-600":"text-yellow-600")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.number}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:e.customerName}),(0,a.jsxs)("p",{className:"text-gray-500 text-xs",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:ex(e.amount)}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===e.status?"bg-green-100 text-green-800":"overdue"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})]})]},e.id))})]})]}):(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"});case"accounting":return en&&O[en].canViewFinancials?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-blue-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Bank Reconciliation"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Manage bank accounts and reconcile transactions"}),(0,a.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Open Banking"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-green-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"General Ledger"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"View and manage journal entries"}),(0,a.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Open Ledger"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)(k.A,{className:"h-6 w-6 text-purple-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Chart of Accounts"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Manage accounting categories"}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Manage Accounts"})]})]})}):(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"});case"documents":return en&&O[en].canUploadDocuments?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Document Management"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 inline mr-2"}),"Upload Document"]}),(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:[(0,a.jsx)(S.A,{className:"h-4 w-4 inline mr-2"}),"Generate Receipt"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(o.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Invoices"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Generated invoices"})]})]}),(0,a.jsx)("button",{className:"w-full bg-blue-100 text-blue-800 px-3 py-2 rounded text-sm font-semibold",children:"View Invoices"})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 text-green-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Receipts"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Payment receipts"})]})]}),(0,a.jsx)("button",{className:"w-full bg-green-100 text-green-800 px-3 py-2 rounded text-sm font-semibold",children:"View Receipts"})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 text-purple-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:"Contracts"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Lease agreements"})]})]}),(0,a.jsx)("button",{className:"w-full bg-purple-100 text-purple-800 px-3 py-2 rounded text-sm font-semibold",children:"View Contracts"})]})]})]})}):(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"});case"reports":return en&&O[en].canViewReports?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,a.jsx)(r.A,{className:"h-6 w-6 text-blue-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Profit & Loss"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Monthly financial performance"}),(0,a.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Generate Report"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,a.jsx)(g.A,{className:"h-6 w-6 text-green-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Cash Flow"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Cash flow analysis and projections"}),(0,a.jsx)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Generate Report"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,a.jsx)(i.A,{className:"h-6 w-6 text-purple-600"})})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Customer Report"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Customer payment history and insights"}),(0,a.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors w-full",children:"Generate Report"})]})]})}):(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"});case"projects":return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Property Projects"}),(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Property project management interface will be implemented here"})]})});case"settings":return"ADMIN"!==en?(0,a.jsx)("div",{className:"text-center py-8",children:"Access denied"}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Business Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Company Information"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Update business details and branding"}),(0,a.jsx)("button",{className:"mt-2 bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:"Configure"})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Invoice Settings"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Customize invoice templates and numbering"}),(0,a.jsx)("button",{className:"mt-2 bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:"Configure"})]}),(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-xl",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Payment Integration"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm",children:"Configure payment gateways and methods"}),(0,a.jsx)("button",{className:"mt-2 bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:"Configure"})]})]})]})})}})()})]})]}),J&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Create New Customer"}),(0,a.jsxs)("form",{onSubmit:ec,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:$.name,onChange:e=>ee({...$,name:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",value:$.email,onChange:e=>ee({...$,email:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,a.jsx)("input",{type:"tel",value:$.phone,onChange:e=>ee({...$,phone:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsxs)("select",{value:$.type,onChange:e=>ee({...$,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"tenant",children:"Tenant"}),(0,a.jsx)("option",{value:"landlord",children:"Landlord"}),(0,a.jsx)("option",{value:"contractor",children:"Contractor"}),(0,a.jsx)("option",{value:"supplier",children:"Supplier"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>W(!1),className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Create Customer"})]})]})]})}),H&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Create New Invoice"}),(0,a.jsxs)("form",{onSubmit:ed,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (KES)"}),(0,a.jsx)("input",{type:"number",value:es.amount,onChange:e=>et({...es,amount:e.target.value}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:es.description,onChange:e=>et({...es,description:e.target.value}),required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:es.dueDate,onChange:e=>et({...es,dueDate:e.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>Q(!1),className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Create Invoice"})]})]})]})}),X&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Record Payment"}),(0,a.jsxs)("form",{onSubmit:eo,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (KES)"}),(0,a.jsx)("input",{type:"number",value:ea.amount,onChange:e=>el({...ea,amount:e.target.value}),required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:ea.status,onChange:e=>el({...ea,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"PENDING",children:"Pending"}),(0,a.jsx)("option",{value:"PAID",children:"Paid"}),(0,a.jsx)("option",{value:"OVERDUE",children:"Overdue"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date (Optional)"}),(0,a.jsx)("input",{type:"date",value:ea.dueDate,onChange:e=>el({...ea,dueDate:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>Z(!1),className:"flex-1 bg-gray-100 text-gray-700 py-2 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Record Payment"})]})]})]})})]})}},4432:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var a=t(5155),l=t(63),n=t(6489),r=t(2115);let i=e=>{let{children:s}=e,t=(0,l.useRouter)(),{data:i,status:c}=(0,n.useSession)();return((0,r.useEffect)(()=>{"loading"!==c&&(i||t.push("/login"))},[i,c,t]),"loading"===c)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):i?(0,a.jsx)(a.Fragment,{children:s}):null}},9447:(e,s,t)=>{Promise.resolve().then(t.bind(t,2229)),Promise.resolve().then(t.bind(t,4432))}},e=>{e.O(0,[6964,3926,8441,1255,7358],()=>e(e.s=9447)),_N_E=e.O()}]);