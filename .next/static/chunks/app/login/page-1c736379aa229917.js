(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{2388:(e,r,a)=>{"use strict";a.d(r,{default:()=>t});var s=a(5155),l=a(2115),o=a(6489),n=a(63);let t=()=>{let[e,r]=(0,l.useState)(!0),[a,t]=(0,l.useState)({name:"",email:"",password:"",confirmPassword:"",role:"LANDLORD"}),[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)(""),m=(0,n.useRouter)(),g=async e=>{e.preventDefault(),d(!0),u("");try{let e=await (0,o.signIn)("credentials",{email:a.email,password:a.password,redirect:!1});(null==e?void 0:e.error)?u("Invalid email or password"):(null==e?void 0:e.ok)&&(console.log("Login successful!"),m.push("/admin"))}catch(e){console.error("Login error:",e),u("An error occurred during login")}finally{d(!1)}},h=async e=>{if(e.preventDefault(),d(!0),u(""),a.password!==a.confirmPassword){u("Passwords do not match"),d(!1);return}try{let e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.name,email:a.email,password:a.password,role:a.role})});if(e.ok)u(""),alert("Account created successfully! Please login."),r(!0),t({name:"",email:"",password:"",confirmPassword:"",role:"LANDLORD"});else{let r=await e.json();u(r.error||"Failed to create account")}}catch(e){console.error("Registration error:",e),u("An error occurred during registration")}finally{d(!1)}};return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>r(!0),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat(e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Login"}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat(e?"text-gray-600 hover:text-gray-900":"bg-white text-gray-900 shadow-sm"),children:"Create Account"})]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-6",children:e?"Property Management Login":"Create Your Account"}),(0,s.jsxs)("form",{onSubmit:e?g:h,children:[!e&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"name",children:"Full Name"}),(0,s.jsx)("input",{type:"text",id:"name",value:a.name,onChange:e=>t({...a,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!e,disabled:i})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"email",children:"Email"}),(0,s.jsx)("input",{type:"email",id:"email",value:a.email,onChange:e=>t({...a,email:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0,disabled:i})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"password",children:"Password"}),(0,s.jsx)("input",{type:"password",id:"password",value:a.password,onChange:e=>t({...a,password:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password",required:!0,disabled:i})]}),!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",id:"confirmPassword",value:a.confirmPassword,onChange:e=>t({...a,confirmPassword:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",required:!e,disabled:i})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-gray-700 font-medium mb-2",htmlFor:"role",children:"Account Type"}),(0,s.jsxs)("select",{id:"role",value:a.role,onChange:e=>t({...a,role:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!e,disabled:i,children:[(0,s.jsx)("option",{value:"LANDLORD",children:"Property Owner/Landlord"}),(0,s.jsx)("option",{value:"OPERATIONS_MANAGER",children:"Operations Manager"}),(0,s.jsx)("option",{value:"ACCOUNTANT",children:"Accountant"}),(0,s.jsx)("option",{value:"SECRETARY",children:"Secretary"})]})]})]}),c&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:c}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?e?"Logging in...":"Creating Account...":e?"Log In":"Create Account"})]}),e&&(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Don't have an account?"}),(0,s.jsx)("button",{onClick:()=>r(!1),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Create Account"})]}),!e&&(0,s.jsxs)("div",{className:"mt-6 text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Already have an account?"}),(0,s.jsx)("button",{onClick:()=>r(!0),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Log In"})]})]})})}},7571:(e,r,a)=>{Promise.resolve().then(a.bind(a,2388))}},e=>{e.O(0,[6964,8441,1255,7358],()=>e(e.s=7571)),_N_E=e.O()}]);